{% extends "base.html" %}
{% block content %}
<div class="card p-4">
  <div class="d-flex justify-content-between align-items-center">
    <h3>All Users</h3>
    <a class="btn btn-success" href="{{ url_for('admin.create_faculty') }}">Create Faculty</a>
  </div>

  <table class="table mt-3">
    <thead><tr><th>#</th><th>Name</th><th>Email</th><th>Role</th><th>Status</th><th>Action</th></tr></thead>
    <tbody>
      {% for u in users %}
      <tr>
        <td>{{ loop.index }}</td>
        <td>{{ u.name }}</td>
        <td>{{ u.email }}</td>
        <td>{{ u.role }}</td>
        <td>{{ u.status }}</td>
        <td>
          {% if u.id != current_user.id %}
            <form method="post" action="{{ url_for('admin.delete_user', uid=u.id) }}" style="display:inline" onsubmit="return confirm('Delete user?');">
              <button class="btn btn-sm btn-danger">Delete</button>
            </form>
          {% else %}
            <span class="text-muted">You</span>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
