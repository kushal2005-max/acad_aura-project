{% extends "base.html" %}
{% block content %}
<div class="card p-4">
  <h3>Attendance Report</h3>

  <form method="POST" class="row g-2 align-items-end">
    <div class="col-md-4">
      <label class="form-label">Subject</label>
      <input name="subject" class="form-control" placeholder="Subject name" required>
    </div>
    <div class="col-md-3">
      <label class="form-label">Start Date</label>
      <input type="date" name="start_date" class="form-control">
    </div>
    <div class="col-md-3">
      <label class="form-label">End Date</label>
      <input type="date" name="end_date" class="form-control">
    </div>
    <div class="col-md-2">
      <button class="btn btn-primary">Generate</button>
    </div>
  </form>

  {% if report %}
    <hr>
    <table class="table mt-3">
      <thead><tr><th>#</th><th>Student</th><th>Total</th><th>Present</th><th>Absent</th><th>%</th></tr></thead>
      <tbody>
        {% for r in report %}
        <tr>
          <td>{{ loop.index }}</td>
          <td>{{ r.student.name }}</td>
          <td>{{ r.total }}</td>
          <td>{{ r.present }}</td>
          <td>{{ r.absent }}</td>
          <td>{{ r.percent if r.percent is not none else '-' }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endif %}
</div>
{% endblock %}
